(this["webpackJsonpmovie-api"]=this["webpackJsonpmovie-api"]||[]).push([[0],{42:function(e,t,c){},47:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),i=c(17),s=c.n(i),o=(c(42),c(3)),l=c(5),j=Object(l.a)(),d=c(10),b=function(){return Object(n.jsx)("header",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)(d.b,{to:"/",children:"WatchList"})}),Object(n.jsxs)("nav",{className:"nav-container",children:[Object(n.jsx)("span",{children:Object(n.jsx)(d.b,{to:"/",children:"Movie List"})}),Object(n.jsx)("span",{children:Object(n.jsx)(d.b,{to:"/watched",children:"Watched"})}),Object(n.jsx)("span",{className:"add-btn",children:Object(n.jsx)(d.b,{to:"/add",children:"+ Add"})})]})]})})},u=c(9),h=(c(47),"https://api.themoviedb.org"),O="https://image.tmdb.org/t/p/w200",v=function(e){var t=e.movie,c=Object(a.useState)(!1),r=Object(u.a)(c,2),i=r[0],s=r[1];return Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h2",{children:t.title}),i?Object(n.jsx)("div",{children:Object(n.jsx)("p",{className:i?"overview-transition":"overview",onClick:function(){return s(!i)},children:t.overview})}):Object(n.jsx)("img",{className:i?"overview-transition":"overview",onClick:function(){return s(!i)},src:"".concat(O,"/").concat(t.img),alt:"".concat(t.title," Poster")})]})},x=function(){var e=localStorage.getItem("watched"),t=JSON.parse(e);return console.log("local watch",t),Object(n.jsxs)("div",{children:[!t&&Object(n.jsx)("h2",{children:"Start adding to your list!"}),t&&t.map((function(e){return null===e?null:Object(n.jsx)("div",{className:"watched-movies-card",children:Object(n.jsx)("div",{children:Object(n.jsx)(v,{movie:e})})},e.id)}))]})},p=function(e){var t=e.page,c=e.setPage,a=e.totalPages,r=function(e){c((function(t){return t+e}))};return console.log("totalpages",a),Object(n.jsxs)("div",{children:[1!==t&&Object(n.jsx)("span",{onClick:function(){return r(-1)},children:"Prev"}),1!==t&&Object(n.jsx)("span",{onClick:function(){return c(1)},children:"1"}),t>2&&Object(n.jsx)("span",{children:"..."}),t>2&&Object(n.jsx)("span",{onClick:function(){return r(-1)},children:t-1}),Object(n.jsx)("span",{children:t}),a&&Object(n.jsx)("span",{onClick:function(){return r(1)},children:t+1}),a&&Object(n.jsx)("span",{onClick:function(){return r(1)},children:"Next"})]})},g=c(20),f=c.n(g),m=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),c=t[0],r=t[1],i=Object(a.useState)(1),s=Object(u.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){f.a.get("".concat(h,"/3/movie/popular?api_key=").concat("a8af73cda7e25b98209f7e5d32ad0261","&language=en-US&page=").concat(o,"&include_adult=false")).then((function(e){return r(e.data)}))}),[o]),console.log("movies",c),console.log("page",o),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Popular movies"}),c&&Object(n.jsx)(p,{page:o,setPage:l,totalPages:c.total_pages}),c&&c.results.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:e.title}),Object(n.jsx)("img",{src:"".concat(O,"/").concat(e.poster_path),alt:"".concat(e.title," Poster")})]},e.id)})),c&&Object(n.jsx)(p,{page:o,setPage:l,totalPages:c.total_pages})]})},w="SEARCH_MOVIE",S="WATCHED_MOVIE",_=c(13),N=c(21),y=function(e){var t=e.movie,c=Object(a.useState)(null),r=Object(u.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),j=l[0],d=l[1],b=i?i.find((function(e){return e.id===t.id})):null;Object(a.useEffect)((function(){s(JSON.parse(localStorage.getItem("watched")))}),[j]);return console.log("filtered",i,j),Object(n.jsxs)(a.Fragment,{children:[Object(n.jsx)("h2",{children:t.title}),Object(n.jsx)("h4",{children:t.release_date?t.release_date.substring(0,4):"N/A"}),Object(n.jsx)("img",{src:"".concat(O,"/").concat(t.poster_path),alt:"".concat(t.title," Poster")}),b?Object(n.jsx)("button",{children:"WATCHED"}):Object(n.jsx)("button",{onClick:function(){return function(e){var t=localStorage.getItem("watched"),c=JSON.parse(t);if(null===t)return s(localStorage.setItem("watched",JSON.stringify([e]))),void d(!0);localStorage.setItem("watched",JSON.stringify([e].concat(Object(N.a)(c)))),s(JSON.parse(localStorage.getItem("watched"))),d(!0)}({id:t.id,title:t.title,release:t.release_date.substring(0,4),img:t.poster_path,overview:t.overview,rating:t.vote_average,watched:!0})},children:"ADD TO WATCHLIST"})]})},C=function(){var e=Object(_.c)((function(e){return e.movie_reducer.search_movie}));return Object(n.jsx)("section",{children:null!==e&&e.map((function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(y,{movie:e})},e.id)}))})},k=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),c=t[0],r=t[1],i=Object(_.b)();return Object(n.jsx)("div",{className:"search-container",children:Object(n.jsxs)("div",{className:"search-bar-wrapper",children:[Object(n.jsx)("input",{type:"text",placeholder:"search for movies",value:c,onChange:function(e){e.preventDefault(),r(e.target.value),console.log("targer",e.target.value),f.a.get("".concat(h,"/3/search/movie?api_key=").concat("a8af73cda7e25b98209f7e5d32ad0261","&query=").concat(c)).then((function(e){return i((t=e.data.results,{type:w,payload:t}));var t}))}}),Object(n.jsx)(C,{})]})})},P=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(o.b,{history:j,children:[Object(n.jsx)(b,{}),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",children:Object(n.jsx)(m,{})}),Object(n.jsx)(o.a,{path:"/watched",children:Object(n.jsx)(x,{})}),Object(n.jsx)(o.a,{path:"/add",children:Object(n.jsx)(k,{})})]})]})})},I=c(12),A=c(16),E={search_movie:null,watched_list:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(A.a)(Object(A.a)({},e),{},{search_movie:t.payload});case S:return console.log("reducer",t),Object(A.a)(Object(A.a)({},e),{},{watched_list:[t.payload].concat(Object(N.a)(e.watched_list))});default:return e}},D=Object(I.b)({movie_reducer:J}),T=Object(I.c)(D);s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(_.a,{store:T,children:Object(n.jsx)(P,{})})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.4b484ed0.chunk.js.map